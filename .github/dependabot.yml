# Dependabot configuration for LangPlug monorepo
# See: https://docs.github.com/code-security/dependabot/dependabot-version-updates/configuration-options-for-the-dependabot.yml-file

version: 2
updates:
  # Root npm dependencies (NX monorepo tooling)
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 10
    labels:
      - "dependencies"
      - "npm"
    groups:
      nx-dependencies:
        patterns:
          - "@nx/*"
          - "nx"

  # Frontend npm dependencies
  - package-ecosystem: "npm"
    directory: "/src/frontend"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 10
    labels:
      - "dependencies"
      - "npm"
      - "frontend"
    groups:
      react-ecosystem:
        patterns:
          - "react*"
          - "@types/react*"
      testing-tools:
        patterns:
          - "@testing-library/*"
          - "@playwright/*"
          - "vitest*"
          - "@vitest/*"
          - "msw"
      dev-tools:
        patterns:
          - "eslint*"
          - "@typescript-eslint/*"
          - "prettier"
          - "typescript"
          - "vite*"
          - "@vitejs/*"

  # E2E tests npm dependencies
  - package-ecosystem: "npm"
    directory: "/tests/e2e"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "npm"
      - "tests"

  # Tests npm dependencies
  - package-ecosystem: "npm"
    directory: "/tests"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "npm"
      - "tests"

  # Frontend integration tests npm dependencies
  - package-ecosystem: "npm"
    directory: "/src/frontend/tests/integration"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "npm"
      - "tests"

  # Backend Python dependencies
  - package-ecosystem: "pip"
    directory: "/src/backend"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 10
    labels:
      - "dependencies"
      - "pip"
      - "backend"
    groups:
      fastapi-ecosystem:
        patterns:
          - "fastapi*"
          - "uvicorn*"
          - "pydantic*"
      sqlalchemy-ecosystem:
        patterns:
          - "sqlalchemy*"
          - "alembic"
          - "aiosqlite"
      ai-ml-core:
        patterns:
          - "torch"
          - "transformers"
          - "spacy"
          - "openai-whisper"
      testing-tools:
        patterns:
          - "pytest*"
          - "httpx"
          - "respx"
          - "freezegun"
          - "responses"
      code-quality:
        patterns:
          - "ruff"
          - "mypy"
          - "bandit*"
          - "pre-commit"

  # Backend Dockerfile
  - package-ecosystem: "docker"
    directory: "/src/backend"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "docker"
      - "backend"

  # Frontend Dockerfile
  - package-ecosystem: "docker"
    directory: "/src/frontend"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 5
    labels:
      - "dependencies"
      - "docker"
      - "frontend"

  # GitHub Actions workflows
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 10
    labels:
      - "dependencies"
      - "github-actions"
    groups:
      github-actions:
        patterns:
          - "*"
